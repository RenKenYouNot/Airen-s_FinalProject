<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Which Hogwarts House Do You Belong To?</title>
    <!-- Use Tailwind CSS for a modern, responsive design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Garamond font as specified in the document -->
    <link href="https://fonts.googleapis.com/css2?family=Garamond:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Custom CSS to apply Garamond font and to add a few custom animations */
        body {
            font-family: 'Garamond', serif;
        }
        /* Custom animation for the result text */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen p-4">

    <!-- Container holds the quiz questions and answer buttons -->
    <div id="quiz-container" class="bg-white p-8 rounded-lg shadow-xl max-w-xl w-full text-center transition-all duration-500">
        <h1 id="question" class="text-3xl font-bold mb-8 text-black"></h1>
        <div id="answer-buttons" class="flex flex-col gap-4"></div>
    </div>

    <!-- Animated text for the sorting process -->
    <div id="result-text" class="text-3xl font-bold mt-12 text-[#0E1A40] text-center min-h-[80px] flex items-center justify-center"></div>

    <!-- Container for the final house result, initially hidden -->
    <div id="final-result-box" class="hidden flex-col items-center p-8 rounded-2xl shadow-2xl w-full max-w-xl text-white mt-12 transition-all duration-500">
        <!-- The house emblem will be an emoji to keep it simple -->
        <span id="house-emblem" class="text-7xl mb-4"></span>
        <h2 id="house-name" class="text-5xl font-bold mb-2"></h2>
        <p id="house-description" class="text-xl mb-4 font-normal"></p>
        <!-- New elements to display house members and founder -->
        <p id="house-founder" class="text-lg font-semibold mb-2"></p>
        <p id="house-members" class="text-lg font-semibold mb-6"></p>
        <button id="restart-button" class="bg-[#C9B9A5] text-white py-3 px-6 rounded-lg font-semibold shadow-md hover:bg-[#B3A592] transform hover:-translate-y-1 transition-all duration-300">Restart Quiz</button>
    </div>

    <script>
        // --- HOGWARTS HOUSE INFO INDEX ---
        const hogwartsHouse = ["Gryffindor", "Ravenclaw", "Slytherin", "Hufflepuff"];
        const houseMember = [
            ["Hermione Granger", "Ron Weasley"],
            ["Luna Lovegood", "Filius Flitwick"],
            ["Bellatrix Lestrange", "Severus Snape"],
            ["Nymphadora Tonks", "Cedric Diggory"]
        ];
        const houseFounder = ["Godric Gryffindor", "Rowena Ravenclaw", "Salazar Slytherin", "Helga Hufflepuff"];

        // --- House Symbols and Descriptions based on the PDF ---
        const houseSymbols = {
            Gryffindor: "ðŸ¦",
            Ravenclaw: "ðŸ¦…",
            Slytherin: "ðŸ",
            Hufflepuff: "ðŸ¦¡"
        };
        const houseDescriptions = {
            Gryffindor: "You are brave, daring, chivalrous, and courageous.",
            Ravenclaw: "You possess intelligence, wit, wisdom, and a thirst for knowledge.",
            Slytherin: "You are ambitious, cunning, resourceful, and a leader.",
            Hufflepuff: "You are loyal, patient, dedicated, and fair-minded."
        };

        // --- QUIZ DATA ---
        const quizData = [
            {
                question: "Dawn or Dusk?",
                answers: [
                    { text: "Dawn", houses: ["Gryffindor", "Hufflepuff"] },
                    { text: "Dusk", houses: ["Ravenclaw", "Slytherin"] }
                ]
            },
            {
                question: "Forest or River?",
                answers: [
                    { text: "Forest", houses: ["Gryffindor", "Ravenclaw"] },
                    { text: "River", houses: ["Hufflepuff", "Slytherin"] }
                ]
            },
            {
                question: "Moon or Stars?",
                answers: [
                    { text: "Moon", houses: ["Ravenclaw", "Slytherin"] },
                    { text: "Stars", houses: ["Gryffindor", "Hufflepuff"] }
                ]
            },
            {
                question: "Black or White?",
                answers: [
                    { text: "Black", houses: ["Gryffindor", "Slytherin"] },
                    { text: "White", houses: ["Ravenclaw", "Hufflepuff"] }
                ]
            },
            {
                question: "Four boxes are placed before you. Which would you try and open?",
                answers: [
                    { text: "The small tortoiseshell box, embellished with gold, inside which some small creature seems to be squeaking.", houses: ["Hufflepuff"] },
                    { text: "The gleaming jet black box with a silver lock and key, marked with a mysterious rune that you know to be the mark of Merlin.", houses: ["Slytherin"] },
                    { text: "The ornate golden casket, standing on clawed feet, whose inscription warns that both secret knowledge and unbearable temptation lie within.", houses: ["Ravenclaw"] },
                    { text: "The small pewter box, unassuming and plain, with a scratched message upon it that reads â€˜I open only for the worthy.'", houses: ["Gryffindor"] }
                ]
            },
            {
                question: "Once every century, the Flutterby bush produces flowers that adapt their scent to attract the unwary. If it lured you, it would smell of:",
                answers: [
                    { text: "The forest after a night of rain", houses: ["Ravenclaw"] },
                    { text: "The sea", houses: ["Slytherin"] },
                    { text: "Hot Cocoa and a blazing log fire", houses: ["Gryffindor"] },
                    { text: "A loved one", houses: ["Hufflepuff"] }
                ]
            },
            {
                question: "Which of the following do you find most difficult to deal with?",
                answers: [
                    { text: "Loneliness", houses: ["Hufflepuff"] },
                    { text: "Boredom", houses: ["Gryffindor"] },
                    { text: "Cold", houses: ["Ravenclaw"] },
                    { text: "Being Ignored", houses: ["Slytherin"] }
                ]
            },
            {
                question: "Which of the following would you most hate people to call you?",
                answers: [
                    { text: "Ordinary", houses: ["Slytherin"] },
                    { text: "Ignorant", houses: ["Ravenclaw"] },
                    { text: "Cowardly", houses: ["Gryffindor"] },
                    { text: "Selfish", houses: ["Hufflepuff"] }
                ]
            },
            {
                question: "If you were attending Hogwarts, which pet would you choose to take with you?",
                answers: [
                    { text: "Cat", houses: ["Ravenclaw"] },
                    { text: "Owl", houses: ["Gryffindor"] },
                    { text: "Toad", houses: ["Hufflepuff"] },
                    { text: "Chameleon", houses: ["Slytherin"] }
                ]
            },
            {
                question: "Which road tempts you most?",
                answers: [
                    { text: "The wide, sunny, grassy lane", houses: ["Hufflepuff"] },
                    { text: "The narrow, dark, lantern-lit alley", houses: ["Slytherin"] },
                    { text: "The twisting, leaf-strewn path through woods", houses: ["Gryffindor"] },
                    { text: "The cobbled street lined with ancient buildings", houses: ["Ravenclaw"] }
                ]
            },
            {
                question: "How would you like to be known to history?",
                answers: [
                    { text: "The Wise", houses: ["Ravenclaw"] },
                    { text: "The bold", houses: ["Gryffindor"] },
                    { text: "The Great", houses: ["Slytherin"] },
                    { text: "The Good", houses: ["Hufflepuff"] }
                ]
            }
        ];

        // --- Quiz state variables ---
        let currentQuestionIndex = 0;
        const houseScores = {
            Gryffindor: 0,
            Hufflepuff: 0,
            Ravenclaw: 0,
            Slytherin: 0
        };

        // --- DOM element references ---
        const quizContainer = document.getElementById("quiz-container");
        const questionElement = document.getElementById("question");
        const answerButtonsElement = document.getElementById("answer-buttons");
        const resultTextElement = document.getElementById("result-text");
        const finalResultBox = document.getElementById("final-result-box");
        const restartButton = document.getElementById("restart-button");

        // --- QUIZ LOGIC ---

        /**
         * Starts the quiz by resetting state and displaying the first question.
         */
        function startQuiz() {
            currentQuestionIndex = 0;
            // Reset scores
            for (const house in houseScores) {
                houseScores[house] = 0;
            }
            // Show quiz container, hide result box
            quizContainer.classList.remove('hidden');
            finalResultBox.classList.add('hidden');
            resultTextElement.textContent = "";

            // Show first question
            showQuestion();
        }

        /**
         * Displays the current question and its answer buttons.
         */
        function showQuestion() {
            // Clear previous buttons
            answerButtonsElement.innerHTML = '';
            
            const currentQuizItem = quizData[currentQuestionIndex];
            questionElement.textContent = currentQuizItem.question;

            // Create buttons for each answer
            currentQuizItem.answers.forEach(answer => {
                const button = document.createElement("button");
                button.textContent = answer.text;
                // Add Tailwind classes for button styling
                button.classList.add("btn", "bg-[#C9B9A5]", "text-white", "py-3", "px-6", "rounded-lg", "font-normal", "shadow-md", "hover:bg-[#B3A592]", "transform", "hover:-translate-y-1", "transition-all", "duration-300", "w-full", "text-left");
                button.addEventListener('click', () => selectAnswer(answer.houses));
                answerButtonsElement.appendChild(button);
            });
        }

        /**
         * Handles the user's answer selection, updates scores, and moves to the next question or shows the result.
         * @param {string[]} selectedHouses The houses associated with the chosen answer.
         */
        function selectAnswer(selectedHouses) {
            // Update scores
            selectedHouses.forEach(house => {
                houseScores[house]++;
            });

            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        // --- CODE: Messages for each house ---
        const gryffindorMessages = [
            "hmmm...",
            "I sense bravery, and a desire to help others.",
            "Rather chivalrous this one."
        ];
        const ravenclawMessages = [
            "hmmm...",
            "A sharp mind, indeed.",
            "A thirst for knowledge and wisdom."
        ];
        const slytherinMessages = [
            "hmmm...",
            "Ambitious, cunning, and resourceful.",
            "You have a knack for leadership."
        ];
        const hufflepuffMessages = [
            "hmmm...",
            "Loyalty and patience define you.",
            "A true and steadfast friend."
        ];

        // --- REUSABLE ANIMATION FUNCTION ---
        /**
         * Display array of text lines in a sequence with the dot animation after each
         * Calls the callback function after all of the lines and animations are complete
         * @param {string[]} lines An array of strings (each represent a line of text)
         * @param {function} finalCallback Function (calls after all lines are displayed and animated)
         */
        function animateSequence(lines, finalCallback) {
            let currentLineIndex = 0;
            const loadingFrames = ["ðŸª„", " ", "âœ¨", " ", "ðŸŒ’", " ", "âœ¨", " ", "ðŸª„", " ", "ðŸŒ’", " "]; // Loading frames
            const frameSpeed = 400; // Speed for loading animation (milliseconds)
            const textDisplayDuration = 3000; // show the text BEFORE its loading animation starts (3 second)
            const loadingAnimationDuration = loadingFrames.length * frameSpeed; // Total time for one full loading animation cycle
            const pauseAfterLoading = 500; // Short pause AFTER loading animation, BEFORE next text (0.5 seconds)

            function showNextPart() {
                if (currentLineIndex < lines.length) {
                    const currentText = lines[currentLineIndex];
                    resultTextElement.textContent = currentText; // Display the line

                    setTimeout(() => {
                        resultTextElement.textContent = ""; // Clear text for loading animation
                        let frameIndex = 0;
                        const animationInterval = setInterval(() => {
                            resultTextElement.textContent = loadingFrames[frameIndex];
                            frameIndex = (frameIndex + 1) % loadingFrames.length;
                        }, frameSpeed);

                        setTimeout(() => {
                            clearInterval(animationInterval);
                            resultTextElement.textContent = "";
                            currentLineIndex++;
                            setTimeout(showNextPart, pauseAfterLoading);
                        }, loadingAnimationDuration + 200);

                    }, textDisplayDuration);

                } else {
                    resultTextElement.textContent = "";
                    if (finalCallback) {
                        finalCallback();
                    }
                }
            }
            showNextPart();
        }

        // --- HOUSE IF RESULT STATEMENTS ---
        function showResult() {
            // Hide the quiz container
            quizContainer.classList.add('hidden');
            
            let finalHouse = null;
            let highestScore = 0;

            // Find the house with the highest score
            for (const house in houseScores) {
                if (houseScores[house] > highestScore) {
                    highestScore = houseScores[house];
                    finalHouse = house;
                }
            }

            // Messages for the final house
            const messagesWithFinal = [];
            if (finalHouse === "Gryffindor") {
                messagesWithFinal.push(...gryffindorMessages);
            } else if (finalHouse === "Ravenclaw") {
                messagesWithFinal.push(...ravenclawMessages);
            } else if (finalHouse === "Slytherin") {
                messagesWithFinal.push(...slytherinMessages);
            } else if (finalHouse === "Hufflepuff") {
                messagesWithFinal.push(...hufflepuffMessages);
            }

            // Call the animation sequence for the determined house
            if (finalHouse) {
                animateSequence(messagesWithFinal, () => {
                    displayFinalResult(finalHouse);
                });
            } else {
                // Fallback if no house is selected
                resultTextElement.textContent = "It seems you haven't been sorted yet! Try the quiz again.";
            }
        }
        
        /**
         * Display final house result card.
         * @param {string} house The name of the final house.
         */
        function displayFinalResult(house) {
            // Remove previous house color classes
            finalResultBox.classList.remove('gryffindor-box', 'ravenclaw-box', 'slytherin-box', 'hufflepuff-box');

            // Apply the new house-specific classes and show the box
            finalResultBox.classList.remove('hidden');
            finalResultBox.classList.add('animate-fade-in');

            // Set specific colors from the PDF file using Tailwind
            if (house === "Gryffindor") {
                finalResultBox.style.backgroundColor = '#740001';
                finalResultBox.style.borderColor = '#D3A625';
                finalResultBox.style.borderWidth = '5px';
            } else if (house === "Ravenclaw") {
                finalResultBox.style.backgroundColor = '#0E1A40';
                finalResultBox.style.borderColor = '#946B2D';
                finalResultBox.style.borderWidth = '5px';
            } else if (house === "Slytherin") {
                finalResultBox.style.backgroundColor = '#1A472A';
                finalResultBox.style.borderColor = '#5D5D5D';
                finalResultBox.style.borderWidth = '5px';
            } else if (house === "Hufflepuff") {
                finalResultBox.style.backgroundColor = '#FFD800';
                finalResultBox.style.color = '#000000';
                finalResultBox.style.borderColor = '#000000';
                finalResultBox.style.borderWidth = '5px';
            }

            // Populate emblem and description
            document.getElementById("house-emblem").textContent = houseSymbols[house];
            document.getElementById("house-name").textContent = house;
            document.getElementById("house-description").textContent = houseDescriptions[house];

            // --- New code to display house members and founder ---
            const houseIndex = hogwartsHouse.indexOf(house);
            const founderElement = document.getElementById("house-founder");
            const membersElement = document.getElementById("house-members");
            
            if (houseIndex !== -1) {
                founderElement.textContent = `Founder: ${houseFounder[houseIndex]}`;
                membersElement.textContent = `Notable Members: ${houseMember[houseIndex].join(', ')}`;
            }
            // --- End of new code ---
        }

        // Listener to the restart button, which will call the startQuiz function again
        restartButton.addEventListener("click", startQuiz);

        // Start the quiz when the page loads
        startQuiz();
    </script>
</body>
</html>
